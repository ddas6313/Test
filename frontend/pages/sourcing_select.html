<!DOCTYPE html>
<html lang="en">
	<!--begin::Body-->
	<head>
		<style>
			.card.card-custom {
				-webkit-box-shadow: 0px 0px 30px 0px rgb(82 63 105 / 5%);
				box-shadow: 0px 0px 30px 0px rgb(82 63 105 / 5%);
				border: 0;
			}
			
			.card {
				position: relative;
				display: -webkit-box;
				display: -ms-flexbox;
				display: flex;
				-webkit-box-orient: vertical;
				-webkit-box-direction: normal;
				-ms-flex-direction: column;
				flex-direction: column;
				min-width: 0;
				word-wrap: break-word;
				background-color: #ffffff;
				background-clip: border-box;
				border: 1px solid #EBEDF3;
				border-radius: 0.42rem;
			}
		</style>
	</head>
	<body id="kt_body" class="">
			<!--begin::Container-->
			<div id="kt_content_container" class="container" style="padding: 15px !important;max-width: 100%;">
			
				<div style="text-align: center; margin: 20px;">
					<h2> <span id="sourcing_jobName1"></span></h2>
					<h3> <span id="sourcing_companyName1"></span></h3>
					<h4><span id="sourcing_count1">No </span> Applicants</h4>
				</div>
			
				<div class="card-body" style="padding-top: 25px !important; background: white; padding: 20px; border-radius: 15px;">
					<div class="row">
						<div class="col-lg-3" onclick="loadApplicantBucket();">
							<div class="card card-custom">
								<div class="card-body btn-hoverable" style="padding: 10px; background: aliceblue;">
									<div class="d-flex align-items-center p-5">
										<div class="mr-6">
											<span class="svg-icon svg-icon-primary svg-icon-4x">
												<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
													<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
														<rect x="0" y="0" width="24" height="24"/>
														<path d="M5.5,4 L9.5,4 C10.3284271,4 11,4.67157288 11,5.5 L11,6.5 C11,7.32842712 10.3284271,8 9.5,8 L5.5,8 C4.67157288,8 4,7.32842712 4,6.5 L4,5.5 C4,4.67157288 4.67157288,4 5.5,4 Z M14.5,16 L18.5,16 C19.3284271,16 20,16.6715729 20,17.5 L20,18.5 C20,19.3284271 19.3284271,20 18.5,20 L14.5,20 C13.6715729,20 13,19.3284271 13,18.5 L13,17.5 C13,16.6715729 13.6715729,16 14.5,16 Z" fill="#000000"/>
														<path d="M5.5,10 L9.5,10 C10.3284271,10 11,10.6715729 11,11.5 L11,18.5 C11,19.3284271 10.3284271,20 9.5,20 L5.5,20 C4.67157288,20 4,19.3284271 4,18.5 L4,11.5 C4,10.6715729 4.67157288,10 5.5,10 Z M14.5,4 L18.5,4 C19.3284271,4 20,4.67157288 20,5.5 L20,12.5 C20,13.3284271 19.3284271,14 18.5,14 L14.5,14 C13.6715729,14 13,13.3284271 13,12.5 L13,5.5 C13,4.67157288 13.6715729,4 14.5,4 Z" fill="#000000" opacity="0.3"/>
													</g>
												</svg>
											</span>
										</div>
										<div class="d-flex flex-column">
											<a href="#" class="text-dark text-hover-primary font-weight-bold" style="font-size: large;">Applicants</a>
											<div class="text-dark-75"><span id="applicantCount1">No</span> Applicant(s)</div>
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="col-lg-3" onclick="loadPipelineBucket();">
							<div class="card card-custom">
								<div class="card-body btn-hoverable" style="padding: 10px; background: aliceblue;">
									<div class="d-flex align-items-center p-5">
										<div class="mr-6">
											<span class="svg-icon svg-icon-primary svg-icon-2x svg-icon-4x"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
												<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
													<rect x="0" y="0" width="24" height="24"/>
													<path d="M8,3 L8,3.5 C8,4.32842712 8.67157288,5 9.5,5 L14.5,5 C15.3284271,5 16,4.32842712 16,3.5 L16,3 L18,3 C19.1045695,3 20,3.8954305 20,5 L20,21 C20,22.1045695 19.1045695,23 18,23 L6,23 C4.8954305,23 4,22.1045695 4,21 L4,5 C4,3.8954305 4.8954305,3 6,3 L8,3 Z" fill="#000000" opacity="0.3"/>
													<path d="M11,2 C11,1.44771525 11.4477153,1 12,1 C12.5522847,1 13,1.44771525 13,2 L14.5,2 C14.7761424,2 15,2.22385763 15,2.5 L15,3.5 C15,3.77614237 14.7761424,4 14.5,4 L9.5,4 C9.22385763,4 9,3.77614237 9,3.5 L9,2.5 C9,2.22385763 9.22385763,2 9.5,2 L11,2 Z" fill="#000000"/>
													<rect fill="#000000" opacity="0.3" x="10" y="9" width="7" height="2" rx="1"/>
													<rect fill="#000000" opacity="0.3" x="7" y="9" width="2" height="2" rx="1"/>
													<rect fill="#000000" opacity="0.3" x="7" y="13" width="2" height="2" rx="1"/>
													<rect fill="#000000" opacity="0.3" x="10" y="13" width="7" height="2" rx="1"/>
													<rect fill="#000000" opacity="0.3" x="7" y="17" width="2" height="2" rx="1"/>
													<rect fill="#000000" opacity="0.3" x="10" y="17" width="7" height="2" rx="1"/>
												</g>
											</svg></span>
										</div>
										<div class="d-flex flex-column">
											<a href="#" class="text-dark text-hover-primary font-weight-bold" style="font-size: large;">Pipeline</a>
											<div class="text-dark-75"><span id="applicantCount2">No</span> Applicant(s)</div>
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="col-lg-3" onclick="loadRecruitingBucket();">
							<div class="card card-custom">
								<div class="card-body btn-hoverable" style="padding: 10px; background: aliceblue;">
									<div class="d-flex align-items-center p-5">
										<div class="mr-6">
											<span class="svg-icon svg-icon-primary svg-icon-4x">
												<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
													<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
														<rect x="0" y="0" width="24" height="24"/>
														<path d="M10.232233,10.232233 L13.767767,13.767767 L8.46446609,19.0710678 C7.48815536,20.0473785 5.90524292,20.0473785 4.92893219,19.0710678 C3.95262146,18.0947571 3.95262146,16.5118446 4.92893219,15.5355339 L10.232233,10.232233 Z" fill="#000000"/>
														<path d="M13.767767,6.69669914 L15.5355339,4.92893219 C16.5118446,3.95262146 18.0947571,3.95262146 19.0710678,4.92893219 C20.0473785,5.90524292 20.0473785,7.48815536 19.0710678,8.46446609 L17.3033009,10.232233 L18.363961,11.2928932 C18.9497475,11.8786797 18.9497475,12.8284271 18.363961,13.4142136 C17.7781746,14 16.8284271,14 16.2426407,13.4142136 L10.5857864,7.75735931 C10,7.17157288 10,6.22182541 10.5857864,5.63603897 C11.1715729,5.05025253 12.1213203,5.05025253 12.7071068,5.63603897 L13.767767,6.69669914 Z" fill="#000000" opacity="0.3"/>
													</g>
												</svg>
											</span>
										</div>
										<div class="d-flex flex-column">
											<a href="#" class="text-dark text-hover-primary font-weight-bold" style="font-size: large;">Recruiting</a>
											<div class="text-dark-75"><span id="applicantCount3">No</span> Applicant(s)</div>
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="col-lg-3" onclick="loadSubmissionBucket();">
							<div class="card card-custom">
								<div class="card-body btn-hoverable" style="padding: 10px; background: aliceblue;">
									<div class="d-flex align-items-center p-5">
										<div class="mr-6">
											<span class="svg-icon svg-icon-primary svg-icon-2x svg-icon-4x"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
												<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
													<rect x="0" y="0" width="24" height="24"/>
													<path d="M8,3 L8,3.5 C8,4.32842712 8.67157288,5 9.5,5 L14.5,5 C15.3284271,5 16,4.32842712 16,3.5 L16,3 L18,3 C19.1045695,3 20,3.8954305 20,5 L20,21 C20,22.1045695 19.1045695,23 18,23 L6,23 C4.8954305,23 4,22.1045695 4,21 L4,5 C4,3.8954305 4.8954305,3 6,3 L8,3 Z" fill="#000000" opacity="0.3"/>
													<path d="M10.875,15.75 C10.6354167,15.75 10.3958333,15.6541667 10.2041667,15.4625 L8.2875,13.5458333 C7.90416667,13.1625 7.90416667,12.5875 8.2875,12.2041667 C8.67083333,11.8208333 9.29375,11.8208333 9.62916667,12.2041667 L10.875,13.45 L14.0375,10.2875 C14.4208333,9.90416667 14.9958333,9.90416667 15.3791667,10.2875 C15.7625,10.6708333 15.7625,11.2458333 15.3791667,11.6291667 L11.5458333,15.4625 C11.3541667,15.6541667 11.1145833,15.75 10.875,15.75 Z" fill="#000000"/>
													<path d="M11,2 C11,1.44771525 11.4477153,1 12,1 C12.5522847,1 13,1.44771525 13,2 L14.5,2 C14.7761424,2 15,2.22385763 15,2.5 L15,3.5 C15,3.77614237 14.7761424,4 14.5,4 L9.5,4 C9.22385763,4 9,3.77614237 9,3.5 L9,2.5 C9,2.22385763 9.22385763,2 9.5,2 L11,2 Z" fill="#000000"/>
												</g>
											</svg></span>
										</div>
										<div class="d-flex flex-column">
											<a href="#" class="text-dark text-hover-primary font-weight-bold" style="font-size: large;">Submission</a>
											<div class="text-dark-75"><span id="applicantCount4">No</span> Applicant(s)</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			
			<!--end::Container-->	
		
<script>
	var arrows;
	function json2array(json){
    var result = [];
    var keys = Object.keys(json);
    keys.forEach(function(key){
        result.push(json[key]);
    });
    return result;
}

	jQuery(document).ready(function() {
		axios({
			method: "post",
			url: serverIP+"graphql",
			headers: {'Content-Type': 'application/json'},
			data: {
				query: `query Requirements{
				employmentTerms(where:{id:"`+sourcingId+`"}){
					id
					createdAt
					title
					client{
					name
					}
					sourcing_details(where:{isActive:true}){
					id
					currentStatus
					}
				}
				}`, 
			}
		})
		.then(resp => {
			applicantData = resp.data.data.employmentTerms;
			var data = applicantData[0].sourcing_details;
			if(applicantData[0].sourcing_details.length > 0){
				$('#sourcing_count1').html(applicantData[0].sourcing_details.length);
			}
			$('#sourcing_jobName1').html(applicantData[0].title);
			$('#sourcing_companyName1').html(applicantData[0].client.name);
			
			var rez={};
			data.forEach(function(item){
				rez[item.currentStatus] ? rez[item.currentStatus]++ :  rez[item.currentStatus] = 1;
			});
			
			if(rez.APPLICANT != undefined ){
				$('#applicantCount1').html(rez.APPLICANT);
			}
			
			if(rez.PIPELINE != undefined ){
				$('#applicantCount2').html(rez.PIPELINE);
			}
			
			if(rez.RECRUITING != undefined ){
				$('#applicantCount3').html(rez.RECRUITING);
			}
			
			if(rez.SUBMISSION != undefined ){
				$('#applicantCount4').html(rez.SUBMISSION);
			}
		})
		.catch((error) => {
			console.log(error);
			toastr.error(error	, "Candidates Fetching Failed", { timeOut: 3000 }); 
		});



	});
	function loadApplicantBucket(){
		sourcingStage = 'APPLICANT';
		loadContent('sourcing_details');  
	}

	function loadPipelineBucket(){
		sourcingStage = 'PIPELINE';
		loadContent('sourcing_details');  
	}

	function loadRecruitingBucket(){
		sourcingStage = 'RECRUITING';
		loadContent('sourcing_details');  
	}

	function loadSubmissionBucket(){
		sourcingStage = 'SUBMISSION';
		loadContent('sourcing_details');  
	}

	</script>
	</body>
	<!--end::Body-->
</html>
